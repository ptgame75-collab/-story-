<!DOCTYPE html>
<html lang="ne">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Aadhiraj Story</title>
    <link rel="manifest" href="manifest.json">
    <style>
        :root { --bg: #FAF9F6; --text: #222; }
        body { background: var(--bg); color: var(--text); margin: 0; font-family: sans-serif; overflow-x: hidden; }
        .hidden { display: none; }

        /* स्प्लास स्क्रिन */
        #splash {
            position: fixed; top:0; width:100%; height:100vh; background: #000; color: #fff;
            display: flex; flex-direction: column; justify-content: center; align-items: center; z-index: 1000;
        }

        /* ट्याब डिजाइन */
        .tabs { display: flex; background: #fff; position: sticky; top: 0; z-index: 100; border-bottom: 1px solid #ddd; }
        .tab-btn { flex: 1; padding: 15px; border: none; background: none; font-size: 18px; font-weight: bold; cursor: pointer; }
        .tab-btn.active { border-bottom: 3px solid #007AFF; color: #007AFF; }

        /* स्वाइप कन्टेनर */
        .swipe-container { display: flex; width: 200vw; transition: transform 0.3s ease-out; }
        .page { width: 100vw; padding: 15px; box-sizing: border-box; }

        /* ठूला स्टोरी कार्डहरू */
        .story-card {
            background: #fff; margin-bottom: 20px; padding: 35px 20px; border-radius: 20px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.05); cursor: pointer;
        }
        .story-card h2 { margin: 0; font-size: 30px; font-weight: 800; line-height: 1.2; }

        /* रिडर स्क्रिन */
        #reader {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: var(--bg);
            z-index: 500; display: none; overflow-y: auto; animation: slideUp 0.4s ease;
        }
        @keyframes slideUp { from { transform: translateY(100%); } to { transform: translateY(0); } }
        .reader-nav { padding: 20px; display: flex; justify-content: space-between; background: #fff; position: sticky; top: 0; }
        .content { padding: 25px; font-size: 22px; line-height: 1.6; }
        .green-msg { color: green; font-weight: bold; font-size: 24px; margin-top: 20px; }
    </style>
</head>
<body>

    <div id="splash">
        <h1>Aadhiraj Story</h1>
        <div style="width:150px; height:3px; background:#333; margin-top:20px; position:relative; overflow:hidden;">
            <div style="width:100%; height:100%; background:#007AFF; position:absolute; left:-100%; animation: load 2s forwards;"></div>
        </div>
    </div>

    <header style="padding: 15px; display: flex; justify-content: space-between; align-items: center; background: #fff;">
        <img src="logo.png" width="40" alt="Logo" onerror="this.style.display='none'">
        <input type="text" id="search" placeholder="खोज्नुहोस्..." style="padding: 8px; border-radius: 10px; border: 1px solid #ddd;">
    </header>

    <div class="tabs">
        <button class="tab-btn active" id="tabNe" onclick="switchTab(0)">नेपाली</button>
        <button class="tab-btn" id="tabHi" onclick="switchTab(1)">हिन्दी</button>
    </div>

    <div class="swipe-container" id="swipeBox">
        <div class="page" id="nepali-list"></div>
        <div class="page" id="hindi-list"></div>
    </div>

    <div id="reader">
        <div class="reader-nav">
            <button onclick="closeStory()" style="font-size: 24px; border:none; background:none;">✕</button>
            <div>
                <button onclick="zoom(-2)">A-</button>
                <button onclick="zoom(2)">A+</button>
            </div>
        </div>
        <div class="content" id="storyContent"></div>
    </div>

    <script>
        let startX = 0;
        const swipeBox = document.getElementById('swipeBox');

        // स्प्लास स्क्रिन २.५ सेकेन्डमा हटाउने
        window.onload = () => {
            setTimeout(() => document.getElementById('splash').style.display = 'none', 2500);
            loadStories();
        };

        async function loadStories() {
            const res = await fetch('stories.json');
            const stories = await res.json();
            
            const neList = document.getElementById('nepali-list');
            const hiList = document.getElementById('hindi-list');

            stories.forEach(s => {
                const card = `
                    <div class="story-card" onclick="openStory('${s.title}', '${s.content}', '${s.author}', '${s.tag}')">
                        <h2>${s.title}</h2>
                        <p style="color:gray; margin-top:10px;">पढ्न ट्याप गर्नुहोस् →</p>
                    </div>`;
                if(s.lang === "hi") hiList.innerHTML += card;
                else neList.innerHTML += card;
            });
        }

        // ट्याब स्विच र स्वाइप लोजिक
        function switchTab(index) {
            swipeBox.style.transform = `translateX(-${index * 100}vw)`;
            document.getElementById('tabNe').classList.toggle('active', index === 0);
            document.getElementById('tabHi').classList.toggle('active', index === 1);
        }

        // मोबाइल स्वाइप जेस्चर (Swipe Gesture)
        swipeBox.addEventListener('touchstart', e => startX = e.touches[0].clientX);
        swipeBox.addEventListener('touchend', e => {
            let diff = startX - e.changedTouches[0].clientX;
            if (diff > 50) switchTab(1); // Right to Left (Hindi)
            if (diff < -50) switchTab(0); // Left to Right (Nepali)
        });

        function openStory(title, content, author, tag) {
            document.getElementById('storyContent').innerHTML = `
                <h1>${title}</h1>
                <p>${content}</p>
                <hr>
                <p>लेखक: <b>${author}</b></p>
                <div class="green-msg">${tag}</div>
                <p style="text-align:center; margin-top:50px; color:gray;">Thanks for reading</p>`;
            document.getElementById('reader').style.display = 'block';
        }

        function closeStory() { document.getElementById('reader').style.display = 'none'; }
        
        let fSize = 22;
        function zoom(n) { fSize += n; document.getElementById('storyContent').style.fontSize = fSize + 'px'; }
    </script>
</body>
</html>
